<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeliÅŸmiÅŸ GÃ¼venlik Test - Zuhal MÃ¼zik</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .btn {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover {
            background: #5a6fd8;
        }
        .btn-danger {
            background: #ff6b6b;
        }
        .btn-success {
            background: #51cf66;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .warning {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border: 1px solid #ffeaa7;
        }
        .success {
            background: #d1ecf1;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border: 1px solid #bee5eb;
        }
        .security-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .security-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #dee2e6;
        }
        .security-card h3 {
            margin-bottom: 15px;
            color: #495057;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 5px 0;
            border-bottom: 1px solid #e9ecef;
        }
        .feature-list li:before {
            content: "âœ… ";
            color: #51cf66;
            font-weight: bold;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” GeliÅŸmiÅŸ GÃ¼venlik Sistemi Test SayfasÄ±</h1>
        
        <div class="success">
            <h3>ğŸ‰ Yeni GeliÅŸmiÅŸ GÃ¼venlik Ã–zellikleri Aktif!</h3>
            <p>ArtÄ±k daha gÃ¼venli bir giriÅŸ sisteminiz var. AÅŸaÄŸÄ±daki Ã¶zellikler test edilebilir:</p>
        </div>

        <div class="security-grid">
            <div class="security-card">
                <h3>ğŸ” PIN Kodu Sistemi</h3>
                <ul class="feature-list">
                    <li>6 haneli PIN kodu</li>
                    <li>User/Admin gruplarÄ±</li>
                    <li>3 yanlÄ±ÅŸ deneme kilitleme</li>
                    <li>30 dakika oturum sÃ¼resi</li>
                </ul>
                <div class="code-block">
KullanÄ±cÄ± PIN'leri:
â€¢ 123456 - KullanÄ±cÄ±
â€¢ 111111 - Test User

YÃ¶netici PIN'leri:
â€¢ 654321 - YÃ¶netici (2FA aktif)
â€¢ 999999 - Admin (2FA aktif)
                </div>
            </div>

            <div class="security-card">
                <h3>ğŸ¢ Odoo Entegrasyonu</h3>
                <ul class="feature-list">
                    <li>Odoo kullanÄ±cÄ± adÄ±/ÅŸifre</li>
                    <li>API token authentication</li>
                    <li>GÃ¼venli server baÄŸlantÄ±sÄ±</li>
                    <li>Session management</li>
                </ul>
                <div class="code-block">
Test Odoo Server:
URL: https://demo.odoo.com
Username: demo
Password: demo
                </div>
            </div>

            <div class="security-card">
                <h3>ğŸ”’ Ä°kili DoÄŸrulama (2FA)</h3>
                <ul class="feature-list">
                    <li>Google Authenticator uyumlu</li>
                    <li>GerÃ§ek TOTP algoritmasÄ±</li>
                    <li>QR kod ile kurulum</li>
                    <li>Yedek kodlar</li>
                </ul>
                <div class="code-block">
TOTP Secret: JBSWY3DPEHPK3PXP
QR Code: otpauth://totp/ZuhalMuzik:...
                </div>
            </div>

            <div class="security-card">
                <h3>ğŸ›¡ï¸ GeliÅŸmiÅŸ GÃ¼venlik</h3>
                <ul class="feature-list">
                    <li>IP adresi kontrolÃ¼</li>
                    <li>Cihaz fingerprinting</li>
                    <li>Åifreli veri saklama</li>
                    <li>Otomatik gÃ¼venlik uyarÄ±larÄ±</li>
                </ul>
                <div class="code-block">
Device Fingerprint: SHA256 hash
IP Tracking: API integration
Encryption: AES-256
                </div>
            </div>

            <div class="security-card">
                <h3>ğŸ‘¥ KullanÄ±cÄ± YÃ¶netimi</h3>
                <ul class="feature-list">
                    <li>KullanÄ±cÄ± ekleme/Ã§Ä±karma</li>
                    <li>Rol bazlÄ± yetkilendirme</li>
                    <li>GÃ¼venilir cihaz yÃ¶netimi</li>
                    <li>Oturum geÃ§miÅŸi</li>
                </ul>
                <div class="code-block">
Admin Yetkileri:
â€¢ KullanÄ±cÄ± ekleme/silme
â€¢ GÃ¼venlik ayarlarÄ±
â€¢ Sistem yÃ¶netimi
                </div>
            </div>

            <div class="security-card">
                <h3>ğŸ“Š GÃ¼venlik Ä°zleme</h3>
                <ul class="feature-list">
                    <li>GiriÅŸ loglarÄ±</li>
                    <li>GÃ¼venlik olaylarÄ±</li>
                    <li>Anomali tespiti</li>
                    <li>GerÃ§ek zamanlÄ± uyarÄ±lar</li>
                </ul>
                <div class="code-block">
Monitoring Features:
â€¢ Login attempts tracking
â€¢ Device fingerprint changes
â€¢ IP address monitoring
â€¢ Session timeout alerts
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ§ª Test SenaryolarÄ±</h2>
            
            <h3>1. PIN Kodu Testi</h3>
            <p>FarklÄ± PIN kodlarÄ± ile giriÅŸ yapmayÄ± deneyin:</p>
            <ul>
                <li>DoÄŸru PIN ile giriÅŸ</li>
                <li>YanlÄ±ÅŸ PIN ile giriÅŸ (3 kez sonra kilitleme)</li>
                <li>Admin PIN ile ikili doÄŸrulama</li>
            </ul>

            <h3>2. Odoo Entegrasyon Testi</h3>
            <p>Odoo demo server'Ä± ile baÄŸlantÄ± testi:</p>
            <ul>
                <li>GeÃ§erli Odoo bilgileri ile giriÅŸ</li>
                <li>GeÃ§ersiz bilgiler ile giriÅŸ</li>
                <li>Server baÄŸlantÄ± hatalarÄ±</li>
            </ul>

            <h3>3. GÃ¼venlik Testi</h3>
            <p>GÃ¼venlik Ã¶zelliklerini test edin:</p>
            <ul>
                <li>FarklÄ± IP'den giriÅŸ denemesi</li>
                <li>Cihaz fingerprint deÄŸiÅŸikliÄŸi</li>
                <li>Oturum sÃ¼resi kontrolÃ¼</li>
                <li>Åifreli veri doÄŸrulamasÄ±</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>ğŸš€ Test Linkleri</h2>
            
            <a href="auth.html" class="btn">ğŸ” Basit PIN Sistemi</a>
            <a href="auth-advanced.html" class="btn btn-success">ğŸ”’ GeliÅŸmiÅŸ GÃ¼venlik Sistemi</a>
            <a href="index.html" class="btn">ğŸ“Š Ana Dashboard</a>
            
            <div style="margin-top: 20px;">
                <button onclick="clearAllData()" class="btn btn-danger">ğŸ—‘ï¸ TÃ¼m Verileri Temizle</button>
                <button onclick="showSecurityStatus()" class="btn">ğŸ“Š GÃ¼venlik Durumu</button>
                <button onclick="testEncryption()" class="btn">ğŸ” Åifreleme Testi</button>
            </div>
        </div>

        <div class="warning">
            <h3>âš ï¸ GÃ¼venlik NotlarÄ±</h3>
            <ul>
                <li><strong>Odoo Entegrasyonu:</strong> Demo server kullanÄ±lÄ±yor, gerÃ§ek sunucunuzda API ayarlarÄ±nÄ± yapÄ±n</li>
                <li><strong>2FA:</strong> Google Authenticator uygulamasÄ± gerekli</li>
                <li><strong>IP KontrolÃ¼:</strong> FarklÄ± IP'lerden giriÅŸ uyarÄ± verecek</li>
                <li><strong>Åifreleme:</strong> TÃ¼m veriler AES-256 ile ÅŸifreleniyor</li>
                <li><strong>Session:</strong> 30 dakika sonra otomatik sona eriyor</li>
            </ul>
        </div>

        <div class="info">
            <h3>ğŸ’¡ Test Ä°puÃ§larÄ±</h3>
            <ol>
                <li>Ã–nce <strong>auth-advanced.html</strong> ile geliÅŸmiÅŸ sistemi test edin</li>
                <li>PIN kodu yerine Odoo giriÅŸ seÃ§eneÄŸini deneyin</li>
                <li>Admin PIN ile ikili doÄŸrulamayÄ± test edin</li>
                <li>GÃ¼venlik butonuna tÄ±klayarak detaylarÄ± gÃ¶rÃ¼n</li>
                <li>FarklÄ± tarayÄ±cÄ±dan giriÅŸ yaparak IP uyarÄ±sÄ±nÄ± test edin</li>
                <li>TarayÄ±cÄ± geliÅŸtirici araÃ§larÄ±ndan localStorage'Ä± kontrol edin</li>
            </ol>
        </div>
    </div>

    <script>
        // TÃ¼m verileri temizle
        function clearAllData() {
            if (confirm('TÃ¼m gÃ¼venlik verilerini temizlemek istediÄŸinizden emin misiniz?')) {
                localStorage.clear();
                alert('âœ… TÃ¼m veriler temizlendi. Sayfa yenilenecek.');
                location.reload();
            }
        }

        // GÃ¼venlik durumunu gÃ¶ster
        function showSecurityStatus() {
            const session = localStorage.getItem('session');
            const trustedDevices = localStorage.getItem('trustedDevices');
            
            let status = 'ğŸ” GÃ¼venlik Durumu:\n\n';
            
            if (session) {
                status += 'âœ… Aktif oturum var\n';
                try {
                    const key = 'zuhal-muzik-secret-key-2024';
                    const bytes = CryptoJS.AES.decrypt(session, key);
                    const sessionData = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));
                    
                    const timeLeft = Math.max(0, 30 * 60 * 1000 - (Date.now() - sessionData.loginTime));
                    const minutesLeft = Math.floor(timeLeft / (60 * 1000));
                    
                    status += `â€¢ KullanÄ±cÄ±: ${sessionData.user.name}\n`;
                    status += `â€¢ Rol: ${sessionData.user.role}\n`;
                    status += `â€¢ 2FA: ${sessionData.user.twoFactorEnabled ? 'Aktif' : 'Pasif'}\n`;
                    status += `â€¢ Kalan sÃ¼re: ${minutesLeft} dakika\n`;
                    status += `â€¢ IP: ${sessionData.ipAddress || 'Bilinmiyor'}\n`;
                } catch (error) {
                    status += 'âŒ Session verisi bozuk\n';
                }
            } else {
                status += 'âŒ Aktif oturum yok\n';
            }
            
            if (trustedDevices) {
                const devices = JSON.parse(trustedDevices);
                status += `\nğŸ“± GÃ¼venilir Cihazlar: ${devices.length}\n`;
                devices.forEach((device, index) => {
                    status += `â€¢ Cihaz ${index + 1}: ${device.ipAddress} (${new Date(device.trustedAt).toLocaleDateString()})\n`;
                });
            } else {
                status += '\nğŸ“± GÃ¼venilir cihaz yok\n';
            }
            
            alert(status);
        }

        // Åifreleme testi
        function testEncryption() {
            const testData = 'Test verisi - Zuhal MÃ¼zik GÃ¼venlik Testi';
            const key = 'zuhal-muzik-secret-key-2024';
            
            try {
                const encrypted = CryptoJS.AES.encrypt(testData, key).toString();
                const decrypted = CryptoJS.AES.decrypt(encrypted, key).toString(CryptoJS.enc.Utf8);
                
                if (decrypted === testData) {
                    alert('âœ… Åifreleme sistemi Ã§alÄ±ÅŸÄ±yor!\n\nOrijinal: ' + testData + '\nÅifrelenmiÅŸ: ' + encrypted.substring(0, 50) + '...\nÃ‡Ã¶zÃ¼lmÃ¼ÅŸ: ' + decrypted);
                } else {
                    alert('âŒ Åifreleme sistemi hatasÄ±!');
                }
            } catch (error) {
                alert('âŒ Åifreleme testi baÅŸarÄ±sÄ±z: ' + error.message);
            }
        }

        // Sayfa yÃ¼klendiÄŸinde gÃ¼venlik durumunu kontrol et
        document.addEventListener('DOMContentLoaded', function() {
            const session = localStorage.getItem('session');
            if (session) {
                document.body.insertAdjacentHTML('afterbegin', `
                    <div style="background: #d4edda; color: #155724; padding: 10px; text-align: center; border-bottom: 1px solid #c3e6cb;">
                        âœ… GeliÅŸmiÅŸ gÃ¼venlik sistemi aktif - Oturum mevcut
                    </div>
                `);
            } else {
                document.body.insertAdjacentHTML('afterbegin', `
                    <div style="background: #f8d7da; color: #721c24; padding: 10px; text-align: center; border-bottom: 1px solid #f5c6cb;">
                        âŒ Oturum bulunamadÄ± - GiriÅŸ yapmanÄ±z gerekiyor
                    </div>
                `);
            }
        });
    </script>
</body>
</html>

import{l as L}from"./core-CUqA-Dyd.js";import{C as p,A as g,d as F,f as m,a as w,D}from"./features-DViFsNSQ.js";import"./data-DcVvJSe6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();window.logger=L;function O(o){const e=document.getElementById(o);if(e){if(o==="channelAll")p.all=e.checked,e.checked&&(Object.keys(p).forEach(t=>{t!=="all"&&(p[t]=!1)}),["channelRetail","channelWholesale","channelOnline","channelCorporate","channelCentral"].forEach(t=>{const n=document.getElementById(t);n&&(n.checked=!1)}));else{const t=o.replace("channel","").toLowerCase();if(p[t]=e.checked,Object.keys(p).filter(s=>s!=="all").some(s=>p[s])){p.all=!1;const s=document.getElementById("channelAll");s&&(s.checked=!1)}else{p.all=!0;const s=document.getElementById("channelAll");s&&(s.checked=!0)}}console.log("🏢 Kanal filtreleri güncellendi:",p),typeof window.loadDashboard=="function"&&window.loadDashboard()}}function z(){return p.all?g.allData:g.allData.filter(o=>{const e=F(o.store||"");return p[e]===!0})}console.log("✅ Filters modülü yüklendi");const S={dashYearly:null,dashTopStores:null,dashTopSalespeople:null,dashTopBrands:null,dashTopCategories:null,dashTopCities:null,dashTopProducts:null},h={primary:"rgba(102, 126, 234, 1)",secondary:"rgba(245, 87, 108, 1)",success:"rgba(56, 239, 125, 1)",warning:"rgba(255, 206, 86, 1)",info:"rgba(79, 172, 254, 1)",purple:"rgba(153, 102, 255, 1)",orange:"rgba(255, 159, 64, 1)",pink:"rgba(255, 99, 132, 1)"},M=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];function C(o){S[o]&&(S[o].destroy(),S[o]=null)}function T(o="sales"){try{const e=document.getElementById("dashYearlyChart");if(!e)throw new Error("Chart canvas bulunamadı: dashYearlyChart");if(!g.allData||g.allData.length===0)throw new Error("Veri yüklenmemiş");const t={},n={};g.allData.forEach(a=>{if(a.date){const u=a.date.substring(0,4),k=a.date.substring(5,7);t[u]||(t[u]={}),t[u][k]||(t[u][k]=0),t[u][k]+=parseFloat(a.usd_amount||0),n[u]||(n[u]={}),n[u][k]||(n[u][k]=0),n[u][k]+=parseFloat(a.quantity||0)}});const s=new Set;Object.values(t).forEach(a=>{Object.keys(a).forEach(u=>s.add(u))});const l=Array.from(s).sort(),i=o==="sales"?t:n,y=[],d=[{border:h.primary,bg:"rgba(102, 126, 234, 0.1)"},{border:h.secondary,bg:"rgba(245, 87, 108, 0.1)"},{border:h.success,bg:"rgba(56, 239, 125, 0.1)"},{border:h.warning,bg:"rgba(255, 206, 86, 0.1)"}];Object.keys(i).sort().forEach((a,u)=>{const k=i[a],v=l.map(A=>k[A]||0),I=d[u%d.length];y.push({label:`${a}`,data:v,borderColor:I.border,backgroundColor:I.bg,borderWidth:3,fill:!0,tension:.4})}),C("dashYearly");const r=l.map(a=>M[parseInt(a)-1]),c=o==="sales";S.dashYearly=new Chart(e,{type:"line",data:{labels:r,datasets:y},options:{responsive:!0,maintainAspectRatio:!0,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:function(a){return c?a.dataset.label+": "+m(a.parsed.y):a.dataset.label+": "+w(a.parsed.y)+" adet"}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:c?"Satış (USD - KDV Hariç)":"Miktar (Adet)",color:c?h.primary:h.orange,font:{weight:"bold",size:12}},ticks:{callback:function(a){return c?m(a):w(a)+" adet"}}}}}})}catch(e){ErrorHandler.handleChartError("dashYearly",e)}}function b(o,e,t){const n=document.getElementById(o);if(!n)return;const s=Object.entries(e).sort((d,r)=>r[1]-d[1]).slice(0,10),l=s.map(([d])=>d),i=s.map(([,d])=>d),y=i.reduce((d,r)=>d+r,0);C(t),S[t]=new Chart(n,{type:"doughnut",data:{labels:l,datasets:[{data:i,backgroundColor:[h.primary,h.secondary,h.success,h.warning,h.info,h.purple,h.orange,h.pink,"rgba(201, 203, 207, 1)","rgba(75, 192, 192, 1)"]}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!0,position:"right"},tooltip:{callbacks:{label:function(d){const r=d.parsed,c=(r/y*100).toFixed(1);return d.label+": "+m(r)+" ("+c+"%)"}}}}}})}function U(o){const e={};o.forEach(t=>{const n=t.partner||"Bilinmeyen";e[n]=(e[n]||0)+parseFloat(t.usd_amount||0)}),b("dashTopStoresChart",e,"dashTopStores")}function _(o){const e={};o.forEach(t=>{const n=t.sales_person||"Bilinmeyen";e[n]=(e[n]||0)+parseFloat(t.usd_amount||0)}),b("dashTopSalespeopleChart",e,"dashTopSalespeople")}function x(o){const e={};o.forEach(t=>{const n=t.brand||"Bilinmeyen";e[n]=(e[n]||0)+parseFloat(t.usd_amount||0)}),b("dashTopBrandsChart",e,"dashTopBrands")}function K(o){const e={};o.forEach(t=>{const n=t.category_2||t.category_1||"Bilinmeyen";["ALL","Bilinmeyen","Analitik","Eğitim"].includes(n)||(e[n]=(e[n]||0)+parseFloat(t.usd_amount||0))}),b("dashTopCategoriesChart",e,"dashTopCategories")}function P(o){const e={};o.forEach(t=>{const n=t.partner_city||"Bilinmeyen";e[n]=(e[n]||0)+parseFloat(t.usd_amount||0)}),b("dashTopCitiesChart",e,"dashTopCities")}function j(o){const e={};o.forEach(t=>{const n=t.product||"Bilinmeyen";e[n]=(e[n]||0)+parseFloat(t.usd_amount||0)}),b("dashTopProductsChart",e,"dashTopProducts")}console.log("✅ Charts modülü yüklendi");let E="sales";function B(){if(console.log("🏠 Dashboard yükleniyor..."),!g.allData||g.allData.length===0){console.warn("⚠️ Veri yok, dashboard yüklenemedi");return}N(),T(E),U(g.allData),_(g.allData),x(g.allData),K(g.allData),P(g.allData),j(g.allData),Y(),console.log("✅ Dashboard yüklendi")}function N(){const o=g.allData,e=o.reduce((a,u)=>a+parseFloat(u.usd_amount||0),0),t=o.reduce((a,u)=>a+parseFloat(u.quantity||0),0),n=new Set(o.map(a=>a.partner).filter(Boolean)).size,s=new Set(o.map(a=>a.product).filter(Boolean)).size,l=new Set(o.map(a=>a.store).filter(Boolean)).size,i=new Set(o.map(a=>a.sales_person).filter(Boolean)).size,y=new Set(o.map(a=>a.date).filter(Boolean)).size,d=y>0?e/y:0,r=new Set(o.filter(a=>a.move_type==="out_invoice").map(a=>a.move_name).filter(Boolean)).size,c=r>0?e/r:0;console.log("📊 Dashboard İstatistikleri:"),console.log("   💰 Toplam Satış:",m(e)),console.log("   📦 Toplam Ürün:",w(t)),console.log("   👥 Müşteri:",n),console.log("   🎸 Ürün Çeşidi:",s),console.log("   🏪 Mağaza:",l),console.log("   👨‍💼 Temsilci:",i),console.log("   📅 Günlük Ortalama:",m(d)),console.log("   🛒 Sepet Ortalaması:",m(c)),console.log("   🧾 Fatura Sayısı:",r),f("dashTotalSales",m(e)),f("dashTotalQty",w(t)),f("dashTotalCustomers",w(n)),f("dashTotalProducts",w(s)),f("dashTotalStores",w(l)),f("dashTotalSalespeople",w(i)),f("dashDailyAverage",m(d)),f("dashBasketAverage",m(c)),f("dashTotalInvoices",w(r))}function f(o,e){const t=document.getElementById(o);t&&(t.textContent=e)}function $(o){E=o;const e=document.getElementById("dashYearlyMetricSales"),t=document.getElementById("dashYearlyMetricQty");o==="sales"?(e.style.background="#667eea",e.style.color="white",t.style.background="white",t.style.color="#667eea"):(e.style.background="white",e.style.color="#667eea",t.style.background="#667eea",t.style.color="white"),T(o)}function Y(){const o=g.allData;if(!o||o.length===0){f("dashAIAnalysis","⚠️ Veri yok, analiz yapılamadı.");return}const e=o.reduce((r,c)=>r+parseFloat(c.usd_amount||0),0),t=e/o.length,n={};o.forEach(r=>{const c=r.category_2||r.category_1||"Bilinmeyen";n[c]=(n[c]||0)+parseFloat(r.usd_amount||0)});const s=Object.entries(n).sort((r,c)=>c[1]-r[1])[0],l={};o.forEach(r=>{const c=r.store||"Bilinmeyen";l[c]=(l[c]||0)+parseFloat(r.usd_amount||0)});const i=Object.entries(l).sort((r,c)=>c[1]-r[1])[0],y=`
        <div style="padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; color: white;">
            <h4 style="margin: 0 0 15px 0;">🤖 AI Dashboard Analizi</h4>
            <p style="margin: 10px 0;">📊 <strong>Toplam Satış:</strong> ${m(e)}</p>
            <p style="margin: 10px 0;">📈 <strong>Ortalama İşlem:</strong> ${m(t)}</p>
            <p style="margin: 10px 0;">🏆 <strong>En İyi Kategori:</strong> ${s?s[0]+" ("+m(s[1])+")":"Bilinmeyen"}</p>
            <p style="margin: 10px 0;">🏪 <strong>En İyi Mağaza:</strong> ${i?i[0]+" ("+m(i[1])+")":"Bilinmeyen"}</p>
            <p style="margin: 10px 0;">💡 <strong>Öneri:</strong> ${s?s[0]:"Kategori"} kategorisine odaklanın ve ${i?i[0]:"mağaza"} stratejisini diğer mağazalara uygulayın.</p>
        </div>
    `,d=document.getElementById("dashAIAnalysis");d&&(d.innerHTML=y)}window.loadDashboard=B;window.changeDashYearlyMetric=$;console.log("✅ Dashboard modülü yüklendi");function q(o){console.log("🔄 switchTab çağrıldı:",o),document.querySelectorAll(".tab-content").forEach(l=>{l.classList.remove("active")});const t=document.querySelectorAll(".tab");t.forEach(l=>{l.classList.remove("active")});const n=document.getElementById(o+"Tab");n?(n.classList.add("active"),console.log("✅ Tab aktif edildi:",o+"Tab")):console.error("❌ Tab bulunamadı:",o+"Tab");const s={dashboard:0,targets:1,customers:2,salesperson:3,store:4,city:5,stock:6,time:7,product:8};s[o]!==void 0&&t[s[o]].classList.add("active"),H(o)}function H(o){switch(o){case"dashboard":B();break;case"targets":typeof window.loadAllStoresTargets=="function"&&window.loadAllStoresTargets();break;case"customers":typeof window.analyzeCustomers=="function"&&window.analyzeCustomers();break;case"time":typeof window.analyzeTime=="function"&&window.analyzeTime();break;case"city":console.log("🌍 Şehir analizi sekmesi açılıyor..."),g.allData&&g.allData.length>0?typeof window.populateCitySelect=="function"&&window.populateCitySelect():(console.warn("⚠️ Veriler henüz yüklenmedi"),setTimeout(()=>{g.allData&&g.allData.length>0&&typeof window.populateCitySelect=="function"&&window.populateCitySelect()},2e3));break;case"stock":console.log("📦 Stok dağılım sekmesi açılıyor..."),console.log("🔄 Envanter verileri lazy loading ile yükleniyor..."),typeof window.loadInventoryData=="function"&&window.loadInventoryData(),Object.keys(g.stockLocations).length===0&&(console.log("🔄 Stok konumları yükleniyor..."),typeof window.loadStockLocations=="function"&&window.loadStockLocations());break}}function G(o){const e={dataStatus:o.dataStatus||"",lastUpdate:o.lastUpdate||"-",totalRecords:o.totalRecords||"-",totalUSD:o.totalUSD||"-",dailyAverage:o.dailyAverage||"-",basketAverage:o.basketAverage||"-"};Object.entries(e).forEach(([t,n])=>{const s=document.getElementById(t);s&&(s.innerHTML=n)})}function R(o){if(!o||o.length===0)return;const e=[...new Set(o.map(i=>i.store).filter(Boolean))].sort(),t=[...new Set(o.map(i=>i.partner).filter(Boolean))].sort(),n=[...new Set(o.map(i=>i.sales_person).filter(Boolean))].sort(),s=[...new Set(o.map(i=>i.brand).filter(Boolean))].sort(),l=[...new Set(o.map(i=>i.category_1).filter(Boolean))].sort();console.log("🔧 Filtreler dolduruluyor:"),console.log("   🏪 Mağaza:",e.length),console.log("   👥 Müşteri:",t.length),console.log("   👨‍💼 Temsilci:",n.length),console.log("   🏷️ Marka:",s.length),console.log("   📂 Kategori:",l.length)}window.switchTab=q;window.updateSummaryCards=G;window.populateFilters=R;console.log("✅ UI modülü yüklendi");class V{constructor(){this.odooUrl="https://erp.zuhalmuzik.com",this.odooDb="erp.zuhalmuzik.com",this.sessionKey="odoo_session",this.sessionDuration=7200*1e3,this.init()}init(){console.log("🔐 OdooAuth initialized"),this.checkSessionOnLoad()}checkSessionOnLoad(){try{console.log("🔍 Session kontrolü başlatılıyor..."),console.log("🔍 Session key:",this.sessionKey),console.log("🔍 Session duration:",this.sessionDuration/6e4,"dakika");const e=this.checkSession();return console.log("🔍 Session sonucu:",e),e.valid?(console.log("✅ Geçerli session bulundu, dashboard açılıyor..."),console.log(`⏰ Session süresi: ${e.remainingTime} dakika kaldı`),this.updateUserInfo(e.user),this.showDashboard(),!0):(console.log("❌ Geçerli session yok, login gerekli"),console.log("❌ Session neden geçersiz:",e),this.showLoginForm(),!1)}catch(e){return console.error("❌ Session kontrol hatası:",e),this.showLoginForm(),!1}}updateUserInfo(e){const t=document.getElementById("currentUserName");t&&e&&(t.textContent=e.name||e.username||e.email||"Kullanıcı",console.log("✅ Kullanıcı bilgisi güncellendi:",e.name||e.username||e.email))}showDashboard(){const e=document.getElementById("authForm"),t=document.getElementById("mainContainer");e&&(e.style.display="none"),t&&(t.style.display="block"),typeof window.loadData=="function"?(console.log("🚀 loadData fonksiyonu çağrılıyor..."),window.loadData()):(console.log("⚠️ loadData fonksiyonu henüz yüklenmedi, 2 saniye bekleniyor..."),setTimeout(()=>{typeof window.loadData=="function"?(console.log("🚀 loadData fonksiyonu çağrılıyor (gecikmeli)..."),window.loadData()):console.error("❌ loadData fonksiyonu bulunamadı!")},2e3))}showLoginForm(){const e=document.getElementById("authForm"),t=document.getElementById("mainContainer"),n=document.getElementById("userInfo");e&&(e.style.display="flex"),t&&(t.style.display="none"),n&&(n.style.display="none")}async login(e,t,n=null){try{if(!e||!t)throw new Error("Kullanıcı adı ve şifre gerekli");const s=Date.now(),l=localStorage.getItem("lastLoginAttempt"),i=parseInt(localStorage.getItem("loginAttemptCount")||"0");if(l&&s-parseInt(l)<5e3)throw new Error("Çok hızlı deneme yapıyorsunuz. 5 saniye bekleyin.");if(i>=3)throw new Error("Çok fazla deneme yapıldı. 10 dakika bekleyin.");console.log("🔐 Odoo login başlatılıyor..."),console.log("URL:",this.odooUrl),console.log("DB:",this.odooDb),console.log("Username:",e);const y={jsonrpc:"2.0",method:"call",params:{db:this.odooDb,login:e,password:t,totp_token:n},id:1};console.log("📡 Odoo'ya direkt istek atılıyor...");const d=await fetch(`${this.odooUrl}/web/session/authenticate`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(y),credentials:"include"});if(!d.ok)throw console.error("❌ Odoo HTTP hatası:",d.status),new Error(`HTTP ${d.status}: ${d.statusText}`);const r=await d.json();if(console.log("📡 Odoo response:",JSON.stringify(r).substring(0,200)),r.result&&r.result.uid){const c=r.result.uid,a=r.result.name||e,u=r.result.session_id;return console.log("✅ Odoo authentication başarılı!"),console.log("User ID:",c),console.log("User Name:",a),console.log("Session ID:",u),localStorage.setItem("lastLoginAttempt",s.toString()),localStorage.setItem("loginAttemptCount","0"),this.saveSession({token:u,user:{id:c,name:a,username:e,email:e},loginTime:s}),{success:!0,user:{id:c,name:a,username:e}}}else{localStorage.setItem("lastLoginAttempt",s.toString()),localStorage.setItem("loginAttemptCount",(i+1).toString());const c=r.error?.data?.message||r.error?.message||"Geçersiz kullanıcı adı, şifre veya 2FA kodu";throw console.error("❌ Odoo authentication başarısız:",c),new Error(c)}}catch(s){throw console.error("❌ Odoo login hatası:",s),s}}saveSession(e){try{const t={...e,timestamp:Date.now()};console.log("🔍 Session kaydediliyor:",t),sessionStorage.setItem(this.sessionKey,JSON.stringify(t)),sessionStorage.setItem("userId",e.user.id),sessionStorage.setItem("userName",e.user.name),sessionStorage.setItem("userEmail",e.user.email||e.user.username),sessionStorage.setItem("authToken",e.token),console.log("✅ Session kaydedildi:",e.user.name),console.log("✅ Session key:",this.sessionKey),console.log("✅ Session data:",JSON.stringify(t))}catch(t){console.error("❌ Session kaydetme hatası:",t)}}checkSession(){try{console.log("🔍 Session kontrolü yapılıyor..."),console.log("🔍 Session key:",this.sessionKey),console.log("🔍 Session duration:",this.sessionDuration/6e4,"dakika");const e=sessionStorage.getItem(this.sessionKey);if(console.log("🔍 Session data:",e),!e)return console.log("❌ Session data yok - sessionStorage boş"),console.log("🔍 Tüm sessionStorage:",sessionStorage),{valid:!1};const t=JSON.parse(e);console.log("🔍 Parsed session:",t);const n=Date.now()-t.timestamp;if(console.log("🔍 Time diff:",n,"ms"),console.log("🔍 Session duration:",this.sessionDuration,"ms"),console.log("🔍 Time diff < session duration:",n<this.sessionDuration),console.log("🔍 Time diff dakika:",Math.round(n/6e4)),console.log("🔍 Session duration dakika:",Math.round(this.sessionDuration/6e4)),n<this.sessionDuration){const s=Math.round((this.sessionDuration-n)/6e4);return console.log(`✅ Geçerli session, kalan: ${s} dakika`),console.log(`⏰ Session süresi: ${this.sessionDuration/6e4} dakika (120 dakika)`),{valid:!0,user:t.user,remainingTime:s}}else return console.log("⏰ Session süresi dolmuş (120 dakika)"),console.log("⏰ Time diff:",n,"ms > Session duration:",this.sessionDuration,"ms"),console.log("⏰ Time diff dakika:",Math.round(n/6e4)),console.log("⏰ Session duration dakika:",Math.round(this.sessionDuration/6e4)),this.logout(),{valid:!1}}catch(e){return console.error("❌ Session kontrol hatası:",e),{valid:!1}}}logout(){sessionStorage.clear(),console.log("🚪 Logout yapıldı");const e=document.getElementById("userInfo");e&&(e.style.display="none"),window.LoginUI&&window.LoginUI.show();const t=document.getElementById("mainContainer");t&&(t.style.display="none"),console.log("🔄 Login ekranına yönlendiriliyor...")}getToken(){return sessionStorage.getItem("authToken")}getUser(){return{id:sessionStorage.getItem("userId"),name:sessionStorage.getItem("userName"),email:sessionStorage.getItem("userEmail")}}}window.OdooAuth=new V;console.log("✅ Odoo Auth module loaded");class J{constructor(){this.authForm=null,this.usernameInput=null,this.passwordInput=null,this.loginBtn=null,this.errorDiv=null,this.init()}init(){console.log("🎨 LoginUI initialized"),this.authForm=document.getElementById("authForm"),this.usernameInput=document.getElementById("odooUsername"),this.passwordInput=document.getElementById("odooPassword"),this.loginBtn=document.getElementById("authLoginBtn"),this.errorDiv=document.getElementById("authError")}show(){this.authForm&&(this.authForm.style.display="flex",console.log("🔐 Login formu gösteriliyor"),setTimeout(()=>{this.usernameInput&&this.usernameInput.focus()},100))}hide(){this.authForm&&(this.authForm.style.display="none",console.log("✅ Login formu gizlendi"))}showLoading(){this.loginBtn&&(this.loginBtn.textContent="⏳ Giriş yapılıyor...",this.loginBtn.disabled=!0)}hideLoading(){this.loginBtn&&(this.loginBtn.textContent="🔓 Giriş Yap",this.loginBtn.disabled=!1)}showError(e){this.errorDiv&&(this.errorDiv.textContent=e,this.errorDiv.style.display="block",this.errorDiv.style.background="#fee",this.errorDiv.style.color="#c33"),this.hideLoading()}showSuccess(e){this.errorDiv&&(this.errorDiv.textContent=e,this.errorDiv.style.display="block",this.errorDiv.style.background="#efe",this.errorDiv.style.color="#3c3")}clearError(){this.errorDiv&&(this.errorDiv.style.display="none")}getCredentials(){return{username:this.usernameInput?.value.trim()||"",password:this.passwordInput?.value||"",totp:document.getElementById("odooTotp")?.value.trim()||""}}clearForm(){this.usernameInput&&(this.usernameInput.value=""),this.passwordInput&&(this.passwordInput.value=""),document.getElementById("odooTotp")&&(document.getElementById("odooTotp").value=""),this.clearError()}async handleLogin(){try{this.clearError(),this.showLoading();const{username:e,password:t,totp:n}=this.getCredentials();if(!e||!t){this.showError("❌ Kullanıcı adı ve şifre gerekli");return}if(!n||n.length!==6){this.showError("❌ 6 haneli 2FA kodu gerekli");return}const s=await window.OdooAuth.login(e,t,n);s.success&&(this.showSuccess("✅ Giriş başarılı! Yönlendiriliyorsunuz..."),this.clearForm(),setTimeout(()=>{this.hide(),window.showDashboardAfterAuth&&window.showDashboardAfterAuth(s.user)},1e3))}catch(e){console.error("❌ Login hatası:",e),this.showError(`❌ ${e.message||"Giriş yapılamadı. Lütfen bilgilerinizi kontrol edin."}`)}}}window.LoginUI=new J;window.odooLogin=function(o,e){window.LoginUI.handleLogin()};console.log("✅ Login UI module loaded");function Q(){const o=sessionStorage.getItem("username");if(o){const e=document.getElementById("currentUserName");e&&(e.textContent=o.charAt(0).toUpperCase()+o.slice(1))}}window.logout=function(){confirm("Çıkış yapmak istediğinizden emin misiniz?")&&(sessionStorage.clear(),localStorage.clear(),typeof window.showAuthForm=="function"&&window.showAuthForm(),console.log("✅ Çıkış yapıldı"))};window.checkLoadingComplete=function(){if(D.ready){console.log("✅ Tüm veriler hazır!");const o=document.getElementById("loadingScreen"),e=document.getElementById("mainContainer");o&&(o.style.display="none"),e&&(e.style.display="block"),typeof window.loadDashboard=="function"&&window.loadDashboard()}};window.loadData=async function(){console.log("🚀 loadData fonksiyonu çağrıldı");try{const o=document.getElementById("dataStatus");o&&(o.innerHTML='<span class="status-badge" style="background:#ffc107;color:#000;">⏳ Yükleniyor...</span>'),loadTargets(),await loadAllData(),console.log("✅ Veri yükleme tamamlandı"),console.log("📊 Toplam kayıt:",g.allData.length),typeof window.loadDashboard=="function"&&window.loadDashboard(),D.ready=!0,window.checkLoadingComplete()}catch(o){console.error("❌ Veri yükleme hatası:",o),alert("Veriler yüklenirken hata oluştu. Lütfen sayfayı yenileyin.")}};window.handleChannelFilter=O;window.getFilteredData=z;window.formatCurrency=m;window.formatNumber=w;document.addEventListener("DOMContentLoaded",function(){console.log("🚀 Uygulama başlatılıyor..."),Q(),D.pageInit=!0,console.log("✅ Uygulama hazır")});console.log("✅ AppInit modülü yüklendi");
